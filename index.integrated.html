<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Music Toys — Integrated (Stable Bouncers)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 16px; }
    .row { display:flex; gap:16px; flex-wrap:wrap; }
    .panel { width:360px; height:260px; border:1px solid #ddd; border-radius:8px; overflow:hidden; }
    h1 { font-size: 18px; margin: 0 0 12px; }
    .note { color:#666; font-size:12px; margin:6px 0 14px; }
  </style>
  <script>
    // Light debug defaults (you can change these in DevTools)
    window.BOUNCER_DBG_LEVEL = 0;         // 0..2
    window.BOUNCER_LOOP_DISABLE = false;  // capture/replay enabled
  </script>
</head>
<body>
  <h1>Music Toys — Integrated</h1>
  <div class="note">This page boots the app and then safely boots the two bouncers.</div>

  <div class="row">
    <div id="toy-b1" class="panel" data-toy="bouncer" data-toy-id="toy-b1" data-instrument="xylophone"></div>
    <div id="toy-b2" class="panel" data-toy="bouncer" data-toy-id="toy-b2" data-instrument="retro_square"></div>
  </div>

  <!-- Load the app (without auto-booting bouncers) -->
  <script type="module" src="./src/main.nobouncer.js"></script>

  <!-- Stable-boot the bouncers after layout is settled -->
  <script type="module">
    import { bootBouncersSafe } from './src/bouncer-stable-boot.js';
    document.addEventListener('DOMContentLoaded', () => {
      bootBouncersSafe(['toy-b1','toy-b2']);
    });
  </script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bouncer Isolated Boot</title>
  <style>
    body { font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif; margin: 0; background:#111; color:#ddd; }
    header { padding:12px 16px; border-bottom:1px solid #333; }
    main { padding:16px; display:grid; gap:16px; grid-template-columns: 1fr; }
    .toy-panel { width: 360px; height: 260px; background:#181818; border:1px solid #333; border-radius:8px; }
    .row { display:flex; gap:16px; flex-wrap:wrap; }
    .note { color:#9ad; }
  </style>
  <!-- Only the minimal files necessary: audio, theme, lazy shim, safe init -->
  <script type="module" src="./src/boot-audio.js"></script>
  <script type="module" src="./src/boot-theme.js"></script>
  <script type="module" src="./src/bouncer-boot-shim.lazy.js"></script>
  <script type="module" src="./src/bouncer-init-noise-guard.js"></script>
</head>
<body>
  <header>
    <strong>Bouncer isolated boot</strong>
    <span class="note">â€” minimal page to verify no hang</span>
  </header>
  <main id="board">
    <section id="toy-b1" class="toy-panel" data-toy="bouncer"></section>
  </main>

  <!-- Explicit, single boot after readiness -->
  <script>
    // If your boot-* modules set __AUDIO_READY/ __THEME_READY, great.
    // This page is minimal, so we mark them ready here.
    window.__AUDIO_READY = true;
    window.__THEME_READY = true;
    (async function startOne(){
      // wait a couple of frames to let modules settle
      for (let i=0;i<4;i++) await new Promise(r=>requestAnimationFrame(()=>r()));
      try {
        await window.bootBouncersSafe?.(['toy-b1']);
        console.log('[page] bootBouncersSafe done');
      } catch (e) {
        console.error('[page] boot error', e);
      }
    })();
  </script>
</body>
</html>
